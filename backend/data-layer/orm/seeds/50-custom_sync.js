export default {
  name: '[MC] Custom sync',
  plural: '[MC] Custom syncs',
  alias: 'mc_custom_sync',
  type: 'core',
  template: 'base',
  access_script: 'p.currentUser.canAtLeastRead()',
  order: '-100',
  __lock: [ 'delete' ],
  fields: [
    {
      name: 'User',
      alias: 'user',
      type: 'reference',
      required_when_script: 'true',
      options: { foreign_model: 'user', foreign_label: '{name} {surname}' },
      __lock: [ 'delete' ],
    },
    {
      name: 'Condition',
      alias: 'condition',
      type: 'condition',
      options: { default: true },
      __lock: [ 'delete' ],
    },
    {
      name: 'Expiry',
      alias: 'obsolescence_time',
      type: 'datetime',
      required_when_script: 'true',
      __lock: [ 'delete' ],
    },
    {
      name: 'Data',
      alias: 'scope',
      type: 'string',
      required_when_script: 'true',
      options: { length: 100000, rows: 20, syntax_hl: 'json' },
      __lock: [ 'delete' ],
    },
    {
      name: 'Status',
      alias: 'status',
      type: 'array_string',
      options: {
        values: {
          '1': 'New',
          '2': 'Completed',
          '3': 'Error'
        },
        default: '1',
      },
      required_when_script: 'true',
      __lock: [ 'delete' ],
    },
    {
      name: 'Error',
      alias: 'error',
      type: 'string',
      options: { length: 10000, rows: 10 },
      __lock: [ 'delete' ],
    },
    {
      name: 'Sync at',
      alias: 'sync_started_at',
      type: 'datetime',
      __lock: [ 'delete' ],
    },
    {
      name: 'Duration (sec.)',
      alias: 'duration',
      type: 'float',
      __lock: [ 'delete' ],
    },
  ],
  views: [
    {
      name: 'Default',
      alias: 'default',
      type: 'grid',
      condition_script: 'p.currentUser.canAtLeastWrite()',
      layout: 'Default',
      filter: 'Default',
      __lock: [ 'delete' ],
    },
  ],
  layouts: [
    {
      name: 'Default',
      type: 'grid',
      options: {
        columns: [ 'id', 'user', 'status', 'sync_started_at', 'duration', 'obsolescence_time','created_at', 'updated_at' ],
        columns_options: {},
        sort_order: [
          { field: 'id', type: 'descending' },
          { field: 'user', type: 'none' },
          { field: 'status', type: 'none' },
          { field: 'sync_started_at', type: 'none' },
          { field: 'duration', type: 'none' },
          { field: 'obsolescence_time', type: 'none' },
          { field: 'created_at', type: 'none' },
          { field: 'updated_at', type: 'none' },
        ],
        wrap_text: true,
        no_wrap_text_limit: 50,
      },
      __lock: [ 'delete' ],
    },
  ],
  forms: [
    {
      name: 'Default',
      alias: 'default',
      order: 0,
      active: true,
      condition_script: 'true',
      options: {
        components: {
          list: [
            '__tab__.main',
            '__section__.1',
            '__column__.1_1',
            'user',
            'sync_started_at',
            'duration',
            'scope',
            'error',
            '__column__.1_2',
            'status',
            'obsolescence_time',
            '__tab__.service',
            '__section__.3',
            'id',
            '__section__.4',
            '__column__.4_1',
            'created_at',
            'updated_at',
            '__column__.4_2',
            'created_by',
            'updated_by',
          ],
          options: {
            '__tab__.main': { expanded: true, name: 'Main' },
            '__tab__.service': { name: 'Service' },
          },
        },
        related_components: { list: [], options: {} },
      },
      __lock: [ 'delete' ],
    },
  ],
  permissions: [
    { type: 'attachment', action: 'create', script: 'p.currentUser.canAtLeastRead()', __lock: ['delete'] }
  ],
};
